cjModules.define(function(){"use strict";return function(e,n,t){function a(e){l=e;var n=u[e];d.cjceSetBackState("home"!==e),d.cjceSetPageLabel(n.label),b.cjceSelectedId=e}function c(){return new Promise(function(e){"popup"===n.environment&&i.tabs&&i.tabs.executeScript||e(null),i.tabs.executeScript({code:"window.getSelection().toString()"},function(n){e(Array.isArray(n)?n[0]:n)})})}function o(e){e&&"string"==typeof e&&j.cjceSendFrameCommand({method:"translatePrefillText",value:e},m)}function s(){j.cjceSendFrameCommand({method:"translateFocus"},m)}function r(e){var t=u[e];t.external?(n.openTab(t.newTabUrl),b.cjceSelectedId=l):(a(e),j.cjceSendFrameCommand({method:"translateUpdateView",value:e},m))}var i="undefined"!=typeof chrome&&chrome.runtime?chrome:"undefined"!=typeof browser&&browser;bmElements.setLoading(e,!0);var l="home",m="https://translate.google.com",u={home:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),shortcutId:"144"},history:{iconName:"__mdi:history",label:cjBasics.lang.i18n("cj_i18n_01354","History")},saved:{iconName:"__mdi:star_outline",label:cjBasics.lang.i18n("cj_i18n_01355","Saved"),divider:!0},community:{iconName:"__mdi:people",label:cjBasics.lang.i18n("cj_i18n_01353","Community"),shortcutId:"351",external:!0},toolkit:{iconName:"__mdi:build",label:cjBasics.lang.i18n("cj_i18n_00505","Translator Toolkit"),shortcutId:"145",external:!0}},d=bmElements.createElement("ogb",{drawer:{color:"#1a73e8"},serviceIcon:"translate",serviceLabel:cjBasics.lang.i18n("cj_i18n_00440","Translate"),pageLabel:cjBasics.lang.i18n("cj_i18n_00291","Home"),bmApis:n,onNewTab:function(){j.cjceSendFrameRequest({method:"translateSubmitAndGetHash"},m).then(function(e){var t="0"===n.account.authuser?"":"authuser="+n.account.authuser,a=e?e+"&"+t:t;n.openTab(m+"/?"+a)})},onBack:function(){h.cjceToggle(!1),r("home")}});e.appendChild(d);var h=d.cjceDrawerEle,b=bmElements.createElement("navlist",{isSelector:!0,selectedId:"home",items:u,onChange:function(e){r(e)},onNewTab:function(e,t){var a=cjgShortcuts.getUrl(t.shortcutId,n.account);n.openTab(a)}});h.appendChild(b),cjBasics.webRequest.addListener("onHeadersReceived",function(e){var n=e.responseHeaders;return n.push({name:"Access-Control-Allow-Origin",value:"*"}),{responseHeaders:n}},{types:["xmlhttprequest"],urls:["https://translate.google.com/translate_a/single*"]},["blocking","responseHeaders"]);var g=cjBasics.urlParams.attach(m+"/m/translate",{bm_cid:"translate",bm_xfo:n.sid,bm_cst:"1",authuser:n.account.authuser,hl:cjBasics.lang.current}),p=c(),j=bmElements.createElement("iframe",{solid:!0,src:g,shadow:!0,onMessage:function(e){var t=e.bm_method,c=e.bm_value;if("translateUpdateView"===t)a(c),h.cjceToggle(!1);else if("translateOpenCommunity"===t){var o=cjgShortcuts.getUrl("351",n.account);n.openTab(o)}},onLoad:function(){bmElements.setLoading(e,!1),p.then(o),n.onPageDisplay(s)}});e.appendChild(j)}});