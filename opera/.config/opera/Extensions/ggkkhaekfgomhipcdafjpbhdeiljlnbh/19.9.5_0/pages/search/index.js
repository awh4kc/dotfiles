cjModules.define(function(){"use strict";return function(e,a,n){function c(e){return{id:e,label:L[e]}}function t(){var e=cjBasics.urlParams.attach("https://www.google.com/search",{authuser:"0"===a.account.authuser?null:a.account.authuser,q:q,tbm:"all"===y?null:y});a.openTab(e)}function i(){return cjBasics.urlParams.attach("https://www.google.com/m",{bm_cid:cjBasics.navigator.vivaldi?["search","desktopsearch"]:"search",bm_cst:"1",bm_xfo:a.sid,bm_wiz:a.sid,bm_mua:a.sid,authuser:a.account.authuser,q:q,tbm:"all"===y?null:y,fg:"1",gws_rd:"cr",nord:"1",igu:cjBasics.navigator.vivaldi?"1":null,hl:cjBasics.lang.current})}function s(){browserStorage.local.setItem(T,{q:q,tbm:y,time:Date.now()})}function l(){browserStorage.local.getItem(T).then(function(e){e&&(e.q&&Date.now()-e.time<36e5?(h(e.tbm),"search"===N&&C.cjceSetEngine(y),f.value=e.q,r(),f.select()):browserStorage.local.remove(T))})}function o(){x=Date.now(),q?(bmElements.setLoading(e,!0),b.src=i()):b.src="",w.cjceToggleState(!1),f.focus(),s()}function r(){q=f.value,b.hidden=!q,v.hidden=q,B.cjceSetCollapseState(q),o(),m()}function d(e){var n=Date.now();cjgApis.suggestquery.get({gAccount:a.account,hl:cjBasics.lang.current,q:e,ds:A[y]}).then(function(e){if(!(x>n)){if(x=n,k.textContent="",!e)return void w.cjceToggleState(!1);for(var a=0;a<e.length;a++){var c=e[a],t=mdElements.createElement("item");t.dataset.value=c.value,t.appendChild(c.html),k.appendChild(t)}w.cjceToggleState(!0)}})}function m(){var e=q&&f.value,n="isch"===y&&a.servicesDatabase.save&&e;E.hidden=!n;var c="shop"===y&&a.servicesDatabase.shortlists&&e;S.hidden=!c}function h(e){y=e,m()}function u(e){h(e),q?o():r()}function g(){function e(e){var a=m.querySelector("[data-id='"+e+"']"),c=d.querySelector(":scope > :nth-child("+n+")"),t=c.dataset.id;a.dataset.id=t,a.textContent=L[t],c.dataset.id=e,c.textContent=L[e],d.selected=e}var a="string"==typeof cjBasics.lang.current&&"en"===cjBasics.lang.current.split("-")[0].split("_")[0],n=a?5:4,i=Object.keys(L),s=i.slice(0,n-1),l=s.map(c),o=i.slice(n-1).map(c),r=mdElements.createElement("appbar",{solid:!0,secondary:!0}),d=mdElements.createElement("tabs",{fill:!0,items:l,onAltClick:function(e){y=e,t()},onChange:u,selected:"all"});r.appendChild(d);var m=bmElements.createElement("menu",{variant:"tabs",hidden:!0,items:o,onClick:function(a){e(a),u(a)}}),h=document.createElement("div");return h.className="cj-md-tabs__item cj-md-tabs__arrow",h.addEventListener("click",function(e){m.cjceToggleState(),e.stopPropagation()}),d.appendChild(h),h.textContent=cjBasics.lang.i18n("cj_i18n_00047","More"),h.appendChild(m),r.cjceSetEngine=function(a){var n=a||"all";d.querySelector("[data-id='"+n+"']")?d.selected=n:e(n)},r}function _(e){var n;n="shopping"===N?{home:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),shortcutId:"129",divider:!0},relatedHeader:{header:!0,color:I,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},search:{iconName:"__mdi:search",label:cjBasics.lang.i18n("cj_i18n_01365","Google Search"),shortcutId:"157"},save:{label:cjBasics.lang.i18n("cj_i18n_01540","Google Collections"),iconName:"__mdi:bookmarks",shortcutId:"359"}}:"patents"===N?{home:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),shortcutId:"115"},relatedHeader:{header:!0,color:I,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},scholar:{iconName:"__mdi:school",label:cjBasics.lang.i18n("cj_i18n_00433","Scholar"),shortcutId:"125"},search:{iconName:"__mdi:search",label:cjBasics.lang.i18n("cj_i18n_01365","Google Search"),shortcutId:"157"}}:{home:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),shortcutId:"157"},save:{iconName:"__mdi:bookmarks",label:cjBasics.lang.i18n("cj_i18n_00432","Collections"),shortcutId:"359",divider:!0},advancedweb:{iconName:"__mdi:search",label:cjBasics.lang.i18n("cj_i18n_00406","Advanced search"),shortcutId:"5",external:!0},advancedimages:{iconName:"__mdi:image_search",label:cjBasics.lang.i18n("cj_i18n_01453","Advanced image search"),shortcutId:"535",external:!0,divider:!0},settings:{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),shortcutId:"127",external:!0}};var c=bmElements.createElement("navlist",{selectedId:"home",items:n,onClick:function(e,n){f.focus(),"save"!==e&&"search"!==e&&"scholar"!==e||a.pageManager.navigate(e)},onNewTab:function(e,n){var c=n.newTabUrl||cjgShortcuts.getUrl(n.shortcutId,a.account);a.openTab(c)}});e.appendChild(c)}function j(){k=mdElements.createElement("list"),k.classList.add("bm-ele-autocomplete"),k.addEventListener("click",function(e){var a=e.target.dataset.value;w.cjceToggleState(!1),f.value=a,r()}),w.appendChild(k)}function p(){var n=cjBasics.lang.i18n("cj_i18n_00434","Search"),c="googleg";"shopping"===N?(n=cjBasics.lang.i18n("cj_i18n_00435","Shopping"),c="shopping"):"patents"===N&&(n=cjBasics.lang.i18n("cj_i18n_00427","Patents"),c="patents");var i=bmElements.createElement("ogb",{drawer:{color:I},serviceLabel:n,pageLabel:cjBasics.lang.i18n("cj_i18n_00291","Home"),serviceIcon:c,searchbox:{searchmenu:!0,color:I,onInput:function(e){d(e),m()},onClear:r,onSubmit:r,onSubmitAlt:function(e){q=e,t()}},bmApis:a,onNewTab:t});e.appendChild(i),E=mdElements.createElement("iconbutton",{iconName:"__mdi:bookmarks",label:cjBasics.lang.i18n("cj_i18n_01454","View saved"),onClick:function(){a.pageManager.navigate("save")}}),E.hidden=!0,i.cjceAppendChild(E),S=mdElements.createElement("iconbutton",{iconName:"__mdi:bookmark",label:cjBasics.lang.i18n("cj_i18n_00436","Shortlists"),onClick:function(){a.pageManager.navigate("shortlists")}}),S.hidden=!0,i.cjceAppendChild(S),B=i.cjceNavigatorEle,_(i.cjceDrawerEle),f=i.cjceSearchboxEle,w=f.cjceSearchmenuEle,j(),C=g(),"search"!==N&&(C.hidden=!0),e.appendChild(C);var s=mdElements.createElement("container",{solid:!0,shadow:"thinOnScroll"});v=mdElements.createElement("emptystate",{color:I,iconName:"__mdi:search",subLabel:cjBasics.lang.i18n("cj_i18n_00046","Please enter a search query")}),s.appendChild(v),b=bmElements.createElement("iframe",{onMessage:function(e){var n=e.bm_method,c=e.bm_value;if("searchUpdateTbm"===n)C.cjceSetEngine(c);else if("searchOpenUrl"===n){var t=cjBasics.cleanBmUrl(c);a.openTab(t)}},onLoad:function(){bmElements.setLoading(e,!1)}}),b.hidden=!0,s.appendChild(b),e.appendChild(s),a.onPageDisplay(f.select),l()}var b,v,f,B,E,S,C,w,k,I="#1a73e8",N=n&&n.productId||"search",q="",y="all";"shopping"===N?y="shop":"patents"===N&&(y="pts");var T="bm_cache_v05__"+N+"__query",x=0,A={isch:"i",bks:"bo",shop:"sh",vid:"yt",nws:"n"},L={all:cjBasics.lang.i18n("cj_i18n_00083","All"),isch:cjBasics.lang.i18n("cj_i18n_00017","Images"),vid:cjBasics.lang.i18n("cj_i18n_00014","Videos"),nws:cjBasics.lang.i18n("cj_i18n_00018","News"),shop:cjBasics.lang.i18n("cj_i18n_00015","Shopping"),bks:cjBasics.lang.i18n("cj_i18n_00019","Books"),pts:cjBasics.lang.i18n("cj_i18n_00427","Patents"),pers:"Personal"};p()}});