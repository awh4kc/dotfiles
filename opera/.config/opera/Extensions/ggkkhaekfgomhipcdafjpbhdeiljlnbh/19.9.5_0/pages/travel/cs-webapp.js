!function(){"use strict";function t(e){return e?"A"===e.tagName?e:t(e.parentNode):null}function e(t){var e=new window.URL(t.href).pathname;if(r?e.startsWith("/travel/trips"):e.startsWith("/flights")||e.startsWith("/local/places/hotel")||e.startsWith("/travel")||"/search"===e||"/m"===e){var a=t.href.split("?");t.href=a[0]+"?bm_cid=travel&bm_xfo="+i+"&bm_cst=1&bm_wiz="+i+"&bm_mua="+i+"&"+a[1]}}if("https://www.google.com"===window.location.origin&&window.top!==window){var a="undefined"!=typeof chrome&&chrome.runtime?chrome:"undefined"!=typeof browser&&browser,n=a.runtime.getURL("PATH").replace("/PATH",""),i=window.location.search.split("bm_xfo=")[1].split("&")[0],o=a.runtime.getURL("").startsWith("moz-extension://"),r=window.location.pathname.startsWith("/travel/trips");document.addEventListener("pointerdown",function(a){if(a.target.classList.contains("gws-flights__back-button"))return void(window.location.hash+=";t:e");var n=t(a.target);n&&!n.bmProcessed&&(n.bmProcessed=!0,n.dataset.href&&e(n.dataset),"#"===n.getAttribute("href")&&n.dataset.href&&(n.href=n.dataset.href),n.href&&"#"!==n.getAttribute("href")&&e(n))}),document.addEventListener("pointerup",function(t){t.target.classList.contains("gws-flights__back-button")&&(window.location.hash+=";t:e")}),document.addEventListener("click",function(e){if("destination-card-large"===e.target.tagName.toLowerCase()){var a="https://www.google.com/destination?dest_mid="+encodeURIComponent(e.target.dataset.mid);return window.location.pathname.indexOf("authuser=")!==-1&&(a+="&authuser="+window.location.pathname.split("authuser=")[1][0]),void window.parent.postMessage({bm_method:"travelOpenUrl",bm_value:a},n)}var i=t(e.target),o=i&&i.href;o&&o.indexOf("bm_cid=travel")===-1&&(window.parent.postMessage({bm_method:"travelOpenUrl",bm_value:o},n),e.stopPropagation(),e.preventDefault())}),window.addEventListener("message",function(t){if(t.origin===n&&(t.isTrusted||o)){var e=t.data||{},a=e.bm_method;"travelOpenFlightPrices"===a&&(window.location.hash+=";t:s")}})}}();