cjModules.define(function(){"use strict";return function(e,a){function n(){var e=document.createElement("div");e.className="bm-p-accountchooser-header",a.darkMode&&e.classList.add("cj-md--dark");var n=72,t=Math.ceil(n*window.devicePixelRatio),c=mdElements.createElement("icon",{circle:!0,size:n,url:a.account.photoUrl+"?sz="+t,backupUrl:"/images/avatar.svg"});c.classList.add("bm-p-accountchooser-header__avatar"),e.appendChild(c);var i=document.createElement("div");i.className="bm-p-accountchooser-header__details";var o=document.createElement("div");o.className="bm-p-accountchooser-header__name",o.textContent=a.account.displayName,i.appendChild(o);var d=document.createElement("div");d.className="cj-md-secondarytext bm-p-accountchooser-header__email",d.textContent=a.account.pageId?cjBasics.lang.i18n("cj_i18n_00363","Brand account"):a.account.displayEmail,i.appendChild(d);var s=mdElements.createElement("button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_01506","Account"),onClick:function(){a.servicesDatabase.myaccount?a.pageManager.navigate("myaccount"):a.openTab("https://myaccount.google.com/"+a.wizPath)}});s.classList.add("bm-p-accountchooser-header__button"),i.appendChild(s);var l=mdElements.createElement("button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_00161","About me"),onClick:function(){a.servicesDatabase.aboutme?a.pageManager.navigate("aboutme"):a.openTab("https://aboutme.google.com/"+a.wizPath)}});l.classList.add("bm-p-accountchooser-header__button"),i.appendChild(l),e.appendChild(i);var r=mdElements.createElement("button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_01507","Sign out"),onClick:function(){cjgApis.account.signout()}});return r.classList.add("bm-p-accountchooser-header__button"),i.appendChild(r),e.appendChild(i),e}function t(e,a){var n=mdElements.createElement("item");a||n.classList.add("bm-p-accountchooser-item--large"),n.addEventListener("click",function(){e.validSession?cjgApis.session.changeAccount(e):cjgApis.account.signin(e)});var t=a?32:40,c=Math.ceil(t*window.devicePixelRatio),i=mdElements.createElement("icon",{circle:!0,size:t,url:e.photoUrl+"?sz="+c});a&&i.classList.add("bm-p-accountchooser-item__compacticon"),n.appendChild(i);var o=document.createElement("div");o.className="cj-md-item__body";var d=document.createElement("div");if(d.className="cj-md-item__header",d.textContent=e.displayName,o.appendChild(d),!a){var s=document.createElement("div");s.className="cj-md-secondarytext",s.textContent=e.displayEmail,o.appendChild(s)}if(!e.validSession){var l=document.createElement("div");l.className="cj-md-secondarytext bm-p-accountchooser-item__signedout",l.textContent=cjBasics.lang.i18n("cj_i18n_01508","Signed out"),o.appendChild(l)}return n.appendChild(o),n}function c(){var e=mdElements.createElement("item",{icon:{size:24,color:"#1a73e8",withShell:!0,name:"__mdi:add"},label:cjBasics.lang.i18n("cj_i18n_00361","Add account")});return e.addEventListener("click",function(){cjgApis.account.signin()}),e}function i(){var i=n();e.appendChild(i);var d=mdElements.createElement("container",{darkMode:a.darkMode,scrollable:!0,shadow:"thinOnScroll"});e.appendChild(d);var s=mdElements.createElement("list"),l=c();s.appendChild(l),cjgApis.session.accountsList.then(function(n){var c={},i=a.account.authuser,l="0"!==i,r={};if(n.forEach(function(e){if(e.pageId)return void(c[e.pageId]=e);if(e.obfuscatedId!==a.account.obfuscatedId){var n=t(e);s.appendChild(n)}var o=e.authuser;o!==i&&(r[o]=!0,l||"1"!==o||(l=!0))}),d.appendChild(s),bmElements.setLoading(e,!1),o&&(l||0!==Object.keys(c).length)){var m=Object.keys(r).map(function(e){return cjgApis.account.list({authuser:e}).then(function(e){e.forEach(function(e){var a=e.pageId;if(a){var n=c[a];(!n||e.ownedBySelectedAccount&&!n.ownedBySelectedAccount)&&(c[a]=e)}})})});Promise.all(m).then(function(){var e=Object.keys(c);if(0!==e.length){var n=mdElements.createElement("subheader",{label:cjBasics.lang.i18n("cj_i18n_00744","Brand accounts")});s.appendChild(n),e.map(function(e){return c[e]}).sort(function(e,a){return e.displayName<a.displayName?-1:1}).forEach(function(e){if(e.obfuscatedId!==a.account.obfuscatedId){var n=t(e,!0);s.appendChild(n)}})}})}})}bmElements.setLoading(e,!0),a.darkMode&&e.classList.add("cj-md--dark");var o=!a.standaloneService||a.servicesDatabase[a.standaloneService].brandAccount;i()}});