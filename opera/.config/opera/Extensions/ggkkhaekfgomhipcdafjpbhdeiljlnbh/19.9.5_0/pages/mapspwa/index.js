cjModules.define(function(){"use strict";return function(e,a){function n(e){var n={home:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),shortcutId:"101"},locationsharing:{label:cjBasics.lang.i18n("cj_i18n_00863","Location sharing"),shortcutId:"590",iconName:"__mdi:record_voice_over",external:!0},places:{label:cjBasics.lang.i18n("cj_i18n_00127","Your places"),shortcutId:"557",iconName:"__mdi:place",external:!0},contributions:{label:cjBasics.lang.i18n("cj_i18n_00128","Your contributions"),shortcutId:"332",iconName:"__mdi:rate_review",external:!0},timeline:{label:cjBasics.lang.i18n("cj_i18n_00129","Your timeline"),shortcutId:"185",iconName:"__mdi:timeline",external:!0,divider:!0},mymaps:{label:cjBasics.lang.i18n("cj_i18n_00410","My Maps"),shortcutId:"167",iconName:"__mdi:file_map"},earth:{label:cjBasics.lang.i18n("cj_i18n_00471","Earth"),shortcutId:"49",iconName:"__mdi:earth",external:!a.servicesDatabase.earth}},t=bmElements.createElement("navlist",{items:n,selectedId:"home",onClick:function(e,n){"home"!==e&&a.pageManager.navigate(e)},onNewTab:function(e,n){var t=n.newTabUrl||cjgShortcuts.getUrl(n.shortcutId,a.account);a.openTab(t)}});e.appendChild(t)}function t(e){if(null===e||!(e instanceof Object))return e;var a=e instanceof Array?[]:{};for(var n in e)a[n]=t(e[n]);return a}function c(e,a,n){r.cjceSendFrameCommand({method:"mapspwaGeolocationResponse",request:e,value:{status:a,result:t(n)}},m)}function o(){return cjBasics.ajax("https://www.google.com/jsapi").then(function(e){var a=e.split("ClientLocation = ")[1].split(";")[0],n=JSON.parse(a);return{timestamp:Date.now(),coords:{accuracy:85e3,altitude:null,altitudeAccuracy:null,heading:null,latitude:n.latitude,longitude:n.longitude,speed:null}}})}function i(e,a){navigator.geolocation[a.method](function(a){c(e,"success",a)},function(a){o().then(function(a){c(e,"success",a)},function(){c(e,"error",a)})},a.options)}function l(e,a){r.cjceSendFrameCommand({method:"bmClickDomElement",value:".ml-dummy-searchbox-placeholder"},m),setTimeout(function(){r.cjceSendFrameCommand({method:a?"bmFillAndSubmit":"bmInputFill",value:{selector:"#ml-searchboxinput",newValue:e}},m)},10)}function s(){var t=bmElements.createElement("ogb",{darkMode:!1,drawer:{color:d},serviceIcon:"maps",pageLabel:cjBasics.lang.i18n("cj_i18n_00291","Home"),serviceLabel:cjBasics.lang.i18n("cj_i18n_00423","Maps"),searchbox:{color:d,onInput:function(e){l(e,!1)},onSubmit:function(e){l(e,!0)},onClear:function(){setTimeout(function(){r.cjceSendFrameCommand({method:"bmClickDomElement",value:".ml-searchbox-pwa-close"},m),r.cjceSendFrameCommand({method:"bmClickDomElement",value:".ml-searchbox-close"},m),r.cjceSendFrameCommand({method:"bmClickDomElement",value:".ml-searchbox-back-button"},m)},11)}},bmApis:a,onNewTab:function(){r.getCleanUrl(m).then(function(e){var n=e?e.split("?")[0]:u;"0"!==a.account.authuser&&(n+="?authuser="+a.account.authuser),a.openTab(n)})}});e.appendChild(t);var c=t.cjceSearchboxEle;a.onPageDisplay(c.select);var o=t.cjceNavigatorEle;n(t.cjceDrawerEle);var s=cjBasics.urlParams.attach(u,{bm_cid:"mapspwa",bm_xfo:a.sid,bm_mua:a.sid,bm_cst:"1",hl:cjBasics.lang.current,force:"pwa",authuser:a.account.authuser});r=bmElements.createElement("iframe",{src:s,shadow:!0,solid:!0,onLoad:function(){bmElements.setLoading(e,!1)},onMessage:function(e){var a=e.bm_method,n=e.bm_request,t=e.bm_value;"mapspwaGeolocationRequest"===a?i(n,t):"mapspwaUpdateQuery"===a&&(c.value=t,o.cjceSetCollapseState(t))}}),e.appendChild(r)}bmElements.setLoading(e,!0);var r,m="https://www.google.com",u=m+"/maps/",d="#1a73e8";s()}});