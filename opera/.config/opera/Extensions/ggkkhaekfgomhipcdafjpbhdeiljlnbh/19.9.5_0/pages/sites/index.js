cjModules.define(function(){"use strict";return function(e,t){function a(e){var a=cjBasics.urlParams.attach(p+"search",{scope:"my",q:e,authuser:t.account.authuser});t.openTab(a)}function n(){var e=bmElements.createElement("navlist",{isSelector:!0,selectedId:"my",items:o,onChange:function(a,n){return"atari"===a?(t.pageManager.navigate("atari"),void(e.cjceSelectedId=h)):(d.textContent="",m.cjceSetPageLabel(n.label),s(a),void(h=a))},onNewTab:function(e,a){var n=a.newTabUrl||cjgShortcuts.getUrl(a.shortcutId,t.account);t.openTab(n)}});u.appendChild(e)}function i(e){var a=mdElements.createElement("item",{multiline:!0});a.addEventListener("click",function(){t.openTab(e.url)});var n=mdElements.createElement("icon",{favicon:e.url});a.appendChild(n);var i=document.createElement("div");i.className="cj-md-item__body",a.appendChild(i);var r=document.createElement("div");r.className="cj-md-item__header",r.textContent=e.primaryText,i.appendChild(r);var c=document.createElement("div");if(c.className="cj-md-secondarytext",c.textContent=e.secondaryText,i.appendChild(c),e.tertiaryText){var s=document.createElement("div");s.className="cj-md-secondarytext",s.textContent=e.tertiaryText,i.appendChild(s)}return a}function r(){var a=cjBasics.urlParams.attach(p+"dashboard/deleted",{mobile:"true",hl:"en",authuser:t.account.authuser});cjBasics.ajax(a).then(function(a){var n=a.replace(/onclick/g,"data-click"),r=document.createElement("div");if(n.indexOf('<ul id="deleted-sites-list-mobile">')!==-1){r.innerHTML=n.split('<ul id="deleted-sites-list-mobile">')[1].split("</ul>")[0];var c=r.children;if(c.length){for(var s=mdElements.createElement("list"),l=0;l<c.length;l++){var o=c[l],u=o.querySelector("a").dataset.click.split("'")[1].split("'")[0],m={url:"https://sites.google.com/site/"+u+"?authuser="+t.account.authuser,primaryText:o.querySelector(".deleted-sites-list-mobile-site-name").textContent,secondaryText:"Deleted by"+o.querySelector("div:nth-child(2)").textContent.split(":")[1]+" on"+o.querySelector("div:nth-child(3)").textContent.split(":")[1],tertiaryText:"/site/"+u},h=i(m);s.appendChild(h)}return d.appendChild(s),void bmElements.setLoading(e,!1)}}var p=mdElements.createElement("emptystate",{color:"#1a73e8",label:cjBasics.lang.i18n("cj_i18n_00055","No sites found"),iconName:"__mdi:drive_site"});d.appendChild(p),bmElements.setLoading(e,!1)})}function c(){var a=cjBasics.urlParams.attach(p+"dashboard",{mobile:"true",hl:"en",authuser:t.account.authuser});cjBasics.ajax(a).then(function(a){var n=document.createElement("div");if(a.indexOf("<ul>")!==-1){n.innerHTML=a.split("<ul>")[1].split("</ul>")[0];var r=n.children,c=window.location.href,s=c.substring(0,c.lastIndexOf("/")+1);if(0!==r.length&&r[0]&&r[0].querySelector(".your-site-title")){for(var l=mdElements.createElement("list"),o=0;o<r.length;o++){var u=r[o],m={url:"https://sites.google.com/"+u.querySelector(".your-site-title").href.replace(s,"")+"?authuser="+t.account.authuser,primaryText:u.querySelector(".your-site-title").textContent,secondaryText:u.querySelector(".sites-dash-site-url").textContent};u.querySelector(".wiki_summarized")&&(m.tertiaryText=u.querySelector(".wiki_summarized").textContent);var h=i(m);l.appendChild(h)}return d.appendChild(l),void bmElements.setLoading(e,!1)}}var p=mdElements.createElement("emptystate",{color:"#1a73e8",label:cjBasics.lang.i18n("cj_i18n_00055","No sites found")+".",subLabel:cjBasics.lang.i18n("cj_i18n_00114","To add a new site, click the add button"),iconName:"__mdi:drive_site"});d.appendChild(p),bmElements.setLoading(e,!1)})}function s(e){"my"===e?c():"trash"===e&&r()}function l(){o={my:{label:cjBasics.lang.i18n("cj_i18n_00054","My Sites"),iconName:"__mdi:drive_site",shortcutId:"130"},trash:{label:cjBasics.lang.i18n("cj_i18n_00113","Deleted sites"),iconName:"__mdi:delete",newTabUrl:p+"dashboard/deleted?authuser="+t.account.authuser,divider:!0},atari:{label:cjBasics.lang.i18n("cj_i18n_00112","Sites"),iconName:"__mdi:atari_site",color:"#3f51b5",colorIcon:!0,shortcutId:"504"}},bmElements.setLoading(e,!0),m=bmElements.createElement("ogb",{darkMode:t.darkMode,drawer:{color:"#1a73e8"},serviceIcon:"sites",serviceLabel:cjBasics.lang.i18n("cj_i18n_00111","Classic Sites"),pageLabel:cjBasics.lang.i18n("cj_i18n_00054","My Sites"),searchbox:{color:"#1a73e8",onSubmit:a,submitInNewTab:!0},bmApis:t,onNewTab:function(){var e=o[h].newTabUrl;t.openTab(e)}}),e.appendChild(m),u=m.cjceDrawerEle,n(),t.onPageDisplay(m.cjceSearchboxEle.select);var i=bmElements.createElement("fab",{darkMode:t.darkMode,label:cjBasics.lang.i18n("cj_i18n_00115","Create new site"),onClick:function(){t.openTab(p+"dashboard/create-new-site?authuser="+t.account.authuser)}});e.appendChild(i),d=mdElements.createElement("container",{darkMode:t.darkMode,scrollable:!0,shadow:"thinOnScroll"}),e.appendChild(d),c()}var o,d,u,m,h="my",p="https://sites.google.com/site/sites/system/app/pages/meta/";l()}});