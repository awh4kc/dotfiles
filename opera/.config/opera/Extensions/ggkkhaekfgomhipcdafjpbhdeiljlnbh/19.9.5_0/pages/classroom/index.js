cjModules.define(function(){"use strict";return function(e,n){function a(e){var a=e.split("/c/")[1];n.openTab(r+"c/"+a)}function s(e){var a=e||{};if(!a.noCache)return cjgApis.cache.getItem(n.account,"bm_cache_v05__classroom__classes").then(function(e){return a.noCache=!0,e?{courses:e.courses,freshRequest:function(){return s(a)}}:s(a)});var c=cjBasics.urlParams.attach(m+"courses",{courseStates:["ACTIVE","PROVISIONED"],fields:"courses(alternateLink,name,section)",pageSize:"50"});return cjgApis.request(c,{fetchAs:"json"},{account:n.account,requiredScopes:d}).then(function(e){return cjgApis.cache.setItem(n.account,"bm_cache_v05__classroom__classes",e),e},function(e){return cjgApis.cache.remove(n.account,"bm_cache_v05__classroom__classes"),Promise.reject(e)})}function c(e){var n=mdElements.createElement("item"),s=mdElements.createElement("icon",{withShell:!0,symbol:e.name[0]});n.appendChild(s);var c=document.createElement("div");c.className="cj-md-item__body",n.appendChild(c);var t=document.createElement("div");if(t.className="cj-md-item__header",t.textContent=e.name,c.appendChild(t),"section"in e){var i=mdElements.createElement("secondarytext",{label:e.section});c.appendChild(i)}return n.addEventListener("click",function(){a(e.alternateLink)}),n}function t(){var n=mdElements.createElement("emptystate",{color:"#34a853",label:cjBasics.lang.i18n("cj_i18n_01258","No classes found"),iconName:"__mdi:class"});l.appendChild(n),bmElements.setLoading(e,!1)}function i(n){if(l.textContent="",n.courses&&n.courses.length>0){var a=mdElements.createElement("list");n.courses.forEach(function(e){var n=c(e);a.appendChild(n)}),l.appendChild(a)}else t();n.freshRequest?n.freshRequest().then(i):bmElements.setLoading(e,!1)}function o(){bmElements.setLoading(e,!0);var a=bmElements.createElement("ogb",{darkMode:n.darkMode,drawer:{color:"#34a853"},serviceIcon:"classroom",serviceLabel:cjBasics.lang.i18n("cj_i18n_00305","Classroom"),pageLabel:cjBasics.lang.i18n("cj_i18n_01255","Classes"),bmApis:n,onNewTab:function(){n.openTab(r)}});e.appendChild(a);var c=a.cjceDrawerEle,t={classes:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_01255","Classes"),newTabUrl:"h"},calendar:{iconName:"__mdi:event",label:cjBasics.lang.i18n("cj_i18n_01256","Calendar"),newTabUrl:"calendar",external:!0,divider:!0},archived:{iconName:"__mdi:archive",label:cjBasics.lang.i18n("cj_i18n_01257","Archived classes"),newTabUrl:"h/archived",external:!0},settings:{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),newTabUrl:"s",external:!0}},o=bmElements.createElement("navlist",{selectedId:"classes",items:t,onNewTab:function(e,a){var s=r+a.newTabUrl;n.openTab(s)}});c.appendChild(o),l=mdElements.createElement("container",{scrollable:!0,shadow:"thinOnScroll",darkMode:n.darkMode}),e.appendChild(l),s().then(i)["catch"](u)}var l,r="https://classroom.google.com/"+n.wizPath,m="https://classroom.googleapis.com/v1/",d=["https://www.googleapis.com/auth/classroom.courses.readonly"],u=function(){var a=!1;return function(s){if(s&&!a&&"not_authorized"===s.cjg_error){a=!0;var c=bmElements.createElement("fulldialog",{darkMode:n.darkMode,inline:!0,lockup:{label:cjBasics.lang.i18n("cj_i18n_00305","Classroom")},iconName:"classroom",message:cjBasics.lang.i18n("cj_i18n_00237","To use Classroom, you need to give access to display your Classroom classes"),actionLabel:cjBasics.lang.i18n("cj_i18n_01178","Continue"),action:function(){cjgApis.auth.requestPermissions(n.account,s.cjg_missing_scopes)}});l.appendChild(c)}bmElements.setLoading(e,!1)}}();o()}});