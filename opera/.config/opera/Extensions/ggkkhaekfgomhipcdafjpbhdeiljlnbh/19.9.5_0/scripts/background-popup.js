!function(){"use strict";function e(e,o,i,t,r,s){n.windows.create({type:"popup",width:600,height:600,top:t||64,left:r||3e3,url:e},function(e){function t(){n.tabs.onRemoved.removeListener(u),n.runtime.onMessage.removeListener(r),n.webRequest.onBeforeRequest.removeListener(a)}function r(e){e.closeAuthPopup&&(n.windows.remove(d),t())}function u(e){e===c&&t()}function a(e){var n=new window.URL(e.url),o=n.hash||"#";if("signin"===i?o="#signin":"signout"===i&&(o="#signout"),s&&(o+="--macpopup"),!cjBasics.navigator.firefox)return{redirectUrl:window.location.origin+"/cjg-popup.html"+n.search+o}}var c=e.tabs[0].id,d=e.id;n.runtime.onMessage.addListener(r),n.tabs.onRemoved.addListener(u),n.webRequest.onBeforeRequest.addListener(a,{tabId:c,urls:[o],types:["main_frame"]},["blocking"])})}var n="undefined"!=typeof chrome&&chrome.runtime?chrome:"undefined"!=typeof browser&&browser;window.createNewPopup=e}();