!function(){"use strict";function e(e,i){return cjBasics.urlParams.inject(e.webViewLink,{authuser:i?i.authuser:null})}function i(e){var i=e.mimeType;if(i.startsWith("application/vnd.google-apps.")){if("application/vnd.google-apps.folder"===i){var n=e.folderColorRgb;return{name:e.shared?"__mdi:folder_shared":"__mdi:folder",color:n&&n.toLowerCase().indexOf("8f8f8f")===-1?n:null}}if("application/vnd.google-apps.document"===i)return p.document;if("application/vnd.google-apps.spreadsheet"===i)return p.spreadsheet;if("application/vnd.google-apps.presentation"===i)return p.presentation;if("application/vnd.google-apps.form"===i)return p.form;if("application/vnd.google-apps.drawing"===i)return p.drawing;if("application/vnd.google-apps.photo"===i)return p.image;if("application/vnd.google-apps.video"===i)return p.video;if("application/vnd.google-apps.audio"===i)return p.audio;if("application/vnd.google-apps.fusiontable"===i)return p.fusion;if("application/vnd.google-apps.map"===i)return p.map;if("application/vnd.google-apps.script"===i)return p.script;if("application/vnd.google-apps.site"===i||"application/vnd.google-apps.sites"===i)return p.sites;if("application/vnd.google-apps.file"===i||"application/vnd.google-apps.unknown"===i)return p.generic}if("application/vnd.google-analytics.rap.report"===i)return p.datareport;if("application/vnd.ms-excel"===i||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===i)return p.excel;if("application/msword"===i||"vnd.openxmlformats-officedocument.wordprocessingml.document"===i)return p.word;if("application/vnd.ms-powerpoint"===i||"application/vnd.openxmlformats-officedocument.presentationml.presentation"===i)return p.powerpoint;if("application/pdf"===i)return p.pdf;if("application/zip"===i)return p.archive;if("application/octet-stream"===i)return p.generic;if(i.startsWith("image/"))return p.image;if(i.startsWith("text/"))return p.text;if(i.startsWith("audio/"))return p.audio;if(i.startsWith("video/"))return p.video;var a=e.iconLink;return a.indexOf("googleusercontent.com/16/type/")!==-1&&(a=a.replace("/16/type/","/32/type/")),{url:a,size:18,color:"#fff"}}function n(e,n){var a=mdElements.createElement("griditem"),t="application/vnd.google-apps.folder"===e.mimeType,o=n.foldersOnTop&&t,r=i(e);if(!o){var l=document.createElement("div");if(l.className="cjg-doclist__griditem__thumbnail","__mdi:drive_image"===r.name&&l.classList.add("cjg-doclist__griditem__thumbnail--photo"),a.appendChild(l),e.hasThumbnail){var d=cjBasics.urlParams.attach("https://drive.google.com/thumbnail",{authuser:n.gAccount.authuser,id:e.id,v:m,sz:"w"+Math.ceil(144*window.devicePixelRatio)});l.style.backgroundImage='url("'+d+'")'}else{var c=mdElements.createElement("icon",{theme:"solid",size:96,color:n.darkMode?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, .15)",name:r.name});l.appendChild(c)}}if(n.hideLabels)a.classList.add("cjg-doclist__griditem--nolabels");else{var s=document.createElement("div");s.className="cj-md-grid__item__bottom cjg-doclist__griditem__bottom",a.appendChild(s);var p=mdElements.createElement("icon",{theme:"solid",name:r.name,color:r.color||n.defaultFileColor,url:r.url,size:r.size});p.classList.add("cjg-doclist__griditem__icon"),s.appendChild(p);var u=document.createElement("div");u.className="cj-md-grid__item__textcontainer",s.appendChild(u);var g=document.createElement("div");if(g.textContent=e.name||"File",u.appendChild(g),e.name.length>20&&(g.name=e.name),o&&t){var _=mdElements.createElement("iconbutton",{iconName:"__mdi:open_in_new",label:cjBasics.lang.i18n("cj_i18n_00123","Open folder in new tab"),onClick:function(i){n.onFileClick(e),i.stopPropagation()}});_.classList.add("cjg-doclist__show-on-hover"),s.appendChild(_)}}return a}function a(e,n){var a="application/vnd.google-apps.folder"===e.mimeType,t=mdElements.createElement("item"),o=i(e),r=mdElements.createElement("icon",{theme:"solid",withShell:!1,name:o.name,url:o.url,size:o.size,color:o.color||n.defaultFileColor});t.appendChild(r);var l=document.createElement("div");l.className="cj-md-item__body";var d=document.createElement("div");if(d.className="cj-md-item__header",d.textContent=e.name,l.appendChild(d),e.shared&&!a){var c=mdElements.createElement("icon",{theme:"solid",name:"__mdi:people",size:20});c.className="cjg-doclist__listitem__shared",d.appendChild(c)}if(e.modifiedTime){var m=document.createElement("div"),s=cjBasics.datetime.printDateString(e.modifiedTime,{alwaysYear:!0});m.className="cj-md-secondarytext",m.textContent=" "+cjBasics.lang.i18n("cj_i18n_00006","modified")+": "+s,l.appendChild(m)}if(t.appendChild(l),a){var p=mdElements.createElement("iconbutton",{iconName:"__mdi:open_in_new",label:cjBasics.lang.i18n("cj_i18n_00123","Open folder in new tab"),onClick:function(i){n.onFileClick(e),i.stopPropagation()}});p.classList.add("cjg-doclist__show-on-hover"),t.appendChild(p)}return t}function t(e){if(e.searching)return cjBasics.lang.i18n("cj_i18n_00116","Try a synonym or more general keyword");if(e.noNewFile)return null;var i=cjBasics.lang.i18n("cj_i18n_00117","You can add new"),n=cjBasics.lang.i18n("cj_i18n_00118","using the button below");return i+" "+e.entityName+" "+n}function o(e){var i=cjBasics.lang.i18n("cj_i18n_00119","No"),n=cjBasics.lang.i18n("cj_i18n_00120","found");return i+" "+e.entityName+" "+n}function r(e){return mdElements.createElement("emptystate",{label:o(e),subLabel:t(e),iconName:e.emptyStateIcon,color:e.primaryColor})}function l(e){var i=cjBasics.urlParams.attach("https://www.googleapis.com/drive/v3/files",{prettyPrint:"false",pageToken:e.pageToken,pageSize:e.pageSize,supportsTeamDrives:"true",includeTeamDriveItems:"true",q:e.q,orderBy:e.orderBy,fields:"files(id,webViewLink,iconLink,name,mimeType,modifiedTime,shared,thumbnailLink,folderColorRgb),nextPageToken"});return cjgApis.request(i,{fetchAs:"json"},{account:e.gAccount,requiredScopes:s}).then(function(e){return{nextPageToken:e.nextPageToken,files:e.files.map(function(e){return e.hasThumbnail="thumbnailLink"in e,delete e.thumbnailLink,e})}})}function d(e,i){var t;return t=i.listview?a(e,i):n(e,i),t.addEventListener("click",function(){var n="application/vnd.google-apps.folder"===e.mimeType;n?i.onFolderClick(e):i.onFileClick(e)}),t}function c(e){function i(e){for(var i=0;i<e.length;i++){var n=e[i];o&&!h&&"application/vnd.google-apps.folder"!==n.mimeType&&(h=!0,s.appendChild(u),s.appendChild(_));var a=d(n,t);o&&!h?v.appendChild(a):f.appendChild(a)}g.appendChild(v),_.appendChild(f)}function n(e){if(s.textContent="",h=!1,0===e.length){var n=r(t);s.appendChild(n)}else{g.textContent="",_.textContent="";var a="application/vnd.google-apps.folder"===e[0].mimeType;t.additionalFragment&&(s.appendChild(t.additionalFragment),o&&a||s.appendChild(u)),o&&a?(s.appendChild(p),s.appendChild(g)):(h=!0,s.appendChild(_)),s.appendChild(_),i(e)}}function a(){return bmElements.setLoading(s,t.loadingColor),l(m).then(function(e){if(e.nextPageToken&&(m.pageToken=e.nextPageToken,s.setInfiniteScroll(a)),C){C=!1;var o=JSON.stringify(e.files);if(o===w)return void bmElements.setLoading(s,!1);cjgApis.cache.setItem(t.gAccount,t.cachingId,o),n(e.files)}else i(e.files);bmElements.setLoading(s,!1)})}var t={gAccount:e.gAccount,noNewFile:e.noNewFile,additionalFragment:e.additionalFragment,listview:e.listview,onFileClick:e.onFileClick,onFolderClick:e.onFolderClick||e.onFileClick,shadow:e.shadow,entityName:e.entityName||cjBasics.lang.i18n("cj_i18n_00144","files"),emptyStateIcon:e.emptyStateIcon||"__mdi:drive_file",primaryColor:e.primaryColor||"#4285f4",loadingColor:e.loadingColor,searching:e.searching||!1,cachingId:e.cachingId||null,hideLabels:e.hideLabels,foldersOnTop:e.orderBy&&e.orderBy.indexOf("folder")!==-1,darkMode:e.darkMode,defaultFileColor:e.darkMode?"rgba(255,255,255,0.38)":"rgba(0,0,0,0.45)"},o=t.foldersOnTop,c=Math.round(document.documentElement.offsetHeight*document.documentElement.offsetWidth/7500);c<50&&(c=50);var m={orderBy:e.orderBy,q:e.q,pageSize:c,gAccount:t.gAccount},s=mdElements.createElement("container",{scrollable:!0,shadow:t.shadow||"transparentOnScroll",infiniteScroll:!0}),p=mdElements.createElement("subheader",{label:cjBasics.lang.i18n("cj_i18n_00121","Folders"),color:e.subHeaderColor}),u=mdElements.createElement("subheader",{label:cjBasics.lang.i18n("cj_i18n_00122","Files"),color:e.subHeaderColor}),g=mdElements.createElement(t.listview?"list":"gridcontainer"),_=mdElements.createElement(t.listview?"list":"gridcontainer"),f=document.createDocumentFragment(),v=document.createDocumentFragment(),h=!1,C=!0,w=null;return t.cachingId&&cjgApis.cache.getItem(t.gAccount,t.cachingId).then(function(e){if(C!==!1&&e){var i=JSON.parse(e);Array.isArray(i)&&(n(i),w=e)}}),a(),s}var m=Date.now().toString(),s=["https://www.googleapis.com/auth/drive"],p={archive:{name:"__mdi:drive_archive"},audio:{name:"__mdi:drive_audio",color:"#ea4335"},datareport:{name:"__mdi:cj_gmp_data_studio_report",color:"#1a73e8"},chart:{name:"__mdi:drive_chart",color:"#34a853"},document:{name:"__mdi:drive_document",color:"#4285f4"},drawing:{name:"__mdi:drive_drawing",color:"#ea4335"},earth:{name:"__mdi:earth",color:"#4285f4"},excel:{name:"__mdi:drive_ms_excel",color:"#34a853"},form:{name:"__mdi:drive_form",color:"#673ab7"},fusion:{name:"__mdi:drive_fusiontable",color:"#34a853"},generic:{name:"__mdi:drive_file",color:"#4285f4"},image:{name:"__mdi:drive_image",color:"#ea4335"},keep:{name:"__mdi:lightbulb",color:"#FFCD40"},map:{name:"__mdi:place",color:"#ea4335"},pdf:{name:"__mdi:drive_pdf",color:"#FE4A22"},powerpoint:{name:"__mdi:drive_ms_powerpoint",color:"#FF752A"},presentation:{name:"__mdi:drive_presentation",color:"#FFCD40"},script:{name:"__mdi:drive_script",color:"#4285f4"},sites:{name:"__mdi:atari_site",color:"#3E50B4"},spreadsheet:{name:"__mdi:drive_spreadsheet",color:"#34a853"},text:{name:"__mdi:drive_text",color:"#4285f4"},video:{name:"__mdi:drive_video",color:"#ea4335"},word:{name:"__mdi:drive_ms_word",color:"#4583EA"},zip:{name:"__mdi:drive_zip"},upload:{name:"__mdi:file_upload"}};Object.defineProperty(window,"cjgDoclist",{value:{create:c,getFileUrl:e}})}();