!function(){"use strict";function e(e){var n=new window.URL(e),t=n.origin+n.pathname,r=n.search.replace("?","").split("&").filter(function(e){return!e.startsWith("bm_")&&!e.startsWith("hl=")}).join("&");r.length>2&&(t+="?"+r);var o=n.hash;return o.startsWith("#")&&(o=o.replace("#","")),o.length>1&&(t+="#"+o),t.endsWith("?undefined")&&(t=t.replace("?undefined","")),t}function n(e){for(var n=document.createDocumentFragment(),t=e.replace(/<i>|<\/i>/g,"").split(/<b>|<\/b>/g),r=0;r<t.length;r++)if(r%2){var o=document.createElement("b");o.textContent=t[r],n.appendChild(o)}else n.appendChild(document.createTextNode(t[r]));return n}function t(){return new Promise(function(e){r.tabs.getCurrent(function(n){"object"==typeof n&&"number"==typeof n.id&&e(n.id),e(-1)})})}var r="undefined"!=typeof chrome&&chrome.runtime?chrome:"undefined"!=typeof browser&&browser,o=function(){function e(e){for(var n,t=e.toString().split(""),r=[],o=[];t.length;){var i=1*t.shift();for(n=0;i||n<r.length;n++)i+=10*(r[n]||0),r[n]=i%16,i=(i-r[n])/16}for(;r.length;)o.push(r.pop().toString(16));return o.join("")}function n(e){function n(e,n){var t=0,r=[];for(e=e.split("").map(Number),n=n.split("").map(Number);e.length||n.length;){var o=(e.pop()||0)+(n.pop()||0)+t;r.unshift(o<10?o:o-10),t=o<10?0:1}return t&&r.unshift(t),r.join("")}var t="0";return e.split("").forEach(function(e){for(var r=parseInt(e,16),o=8;o;o>>=1)t=n(t,t),r&o&&(t=n(t,"1"))}),t}return{hex2dec:n,dec2hex:e}}(),i=function(){var e=navigator.platform.toLowerCase().indexOf("mac")!==-1,n=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=n&&navigator.userAgent.toLowerCase().indexOf("fennec")>-1,r=navigator.userAgent.indexOf("OPR")!==-1,o=navigator.userAgent.indexOf("Vivaldi")!==-1,i=e&&!n;return{mac:e,vivaldi:o,firefox:n,firefoxMobile:t,opera:r,preferNativeScrollbar:i,metaKeyName:e?"metaKey":"ctrlKey"}}(),a=function(){function e(e){if(!e)return{};try{return JSON.parse('{"'+e.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,n){return""===e?n:decodeURIComponent(n)})}catch(n){return{}}}function n(n){var t=("string"==typeof n?new window.URL(n):window.location).search.substring(1);return e(t)}function t(e){if("object"!=typeof e)return"";var n=[];return Object.keys(e).forEach(function(t){if(null!==e[t]&&"undefined"!=typeof e[t])return Array.isArray(e[t])?void e[t].forEach(function(e){n.push(t+"="+encodeURIComponent(e))}):void n.push(t+"="+encodeURIComponent(e[t]))}),n.join("&")}function r(e,n,r){return r&&console.error("Hash has been removed"),e+"?"+t(n)}function o(e,t){var o=n(e);for(var i in t)o[i]=encodeURIComponent(t[i]);var a=e.split("#")[1],u=r(e.split("?")[0],o);return a?u+"#"+a:u}return{get:n,parse:e,create:t,inject:o,attach:r}}(),u=function(){return function(e,n){var t=n||{},r=t.fetchAs||"text";return new Promise(function(n,o){var i=new window.XMLHttpRequest;return i.open(t.method||"GET",e),i.addEventListener("load",function(){if(i.status>=200&&i.status<300)if("json"===r)try{n(JSON.parse(i.responseText))}catch(e){o(e)}else n("xml"===r?i.responseXML:"html"===r?(new window.DOMParser).parseFromString(i.responseText,"text/html"):i.responseText);else{var t={status:i.status,body:i.responseText};o(t)}}),i.addEventListener("error",function(){var e={status:i.status,body:i.responseText};o(e)}),t.credentials&&"include"===t.credentials&&(i.withCredentials=!0),t.headers&&Object.keys(t.headers).forEach(function(e){var n=t.headers[e];null!==n&&"undefined"!=typeof n&&i.setRequestHeader(e,n)}),"json"===r&&i.overrideMimeType("application/json"),i.send(t.body),i})}}(),s=function(){function e(e,n){var t=e.getFullYear(),r=e.getMonth(),o=e.getDate();if(t===i&&r===a){if(o===u)return f;if(u-o===1)return d;if(u-o===-1)return l}var p=s[r],v=p+" "+o;if(t&&(t!==i||n.alwaysYear))return v+", "+t;if(!n.weekday)return v;var m=c[e.getDay()];return m+", "+v}function n(e){return e?e>9?e.toString():"0"+e.toString():"00"}function t(e){var t=n(e.getHours()),r=n(e.getMinutes());return", "+t+":"+r}function r(n,r){var o=r||{},i=new Date(n),a=e(i,o);return o.time?a+t(i):a}var o=new Date,i=o.getFullYear(),a=o.getMonth(),u=o.getDate(),s=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],c=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],f="Today",d="Yesterday",l="Tomorrow";return{printDateString:r}}(),c=function(){function e(e){return t[e]||(t[e]=new Promise(function(n,t){function r(){i.removeEventListener("load",r),i.removeEventListener("error",o),n()}function o(e){i.removeEventListener("load",r),i.removeEventListener("error",o),t(new Error("Loading failed"))}var i=document.createElement("link");i.rel="stylesheet",i.href=e,i.addEventListener("load",r),i.addEventListener("error",o),document.head.appendChild(i)})),t[e]}function n(e){return r[e]||(r[e]=new Promise(function(n,t){var r=document.createElement("script");r.src=e,r.async=!0,r.addEventListener("load",n),r.addEventListener("error",t),document.head.appendChild(r)})),r[e]}var t={},r={};return{loadScript:n,loadStyle:e}}(),f=function(){function e(){return(Date.now()+Math.random()).toString(36).replace(".","_")}return{generate:e}}(),d=function(){function e(e,t,o,i){function a(e){if(t)return t(e)}return o=o||{},o.tabId=n,r.webRequest[e].addListener(a,o,i),{removeListener:function(){setTimeout(function(){r.webRequest[e].removeListener(a)},100)}}}var n=-1;return"tabs"in r&&r.tabs.getCurrent(function(e){"object"==typeof e&&"number"==typeof e.id&&(n=e.id)}),{addListener:e}}(),l=function(){var e=!1;return e?{current:"ja",i18n:function(){return"-"}}:{current:navigator.language,i18n:function(e,n){return e&&r.i18n.getMessage(e)||n||""}}}();window.cjBasics={ajax:u,navigator:i,urlParams:a,resources:c,datetime:s,uniqueId:f,numbers:o,webRequest:d,lang:l,cleanBmUrl:e,htmlToFragment:n,getTabId:t}}();