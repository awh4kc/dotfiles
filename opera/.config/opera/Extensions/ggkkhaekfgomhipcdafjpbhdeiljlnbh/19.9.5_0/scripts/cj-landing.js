var cjLanding=function(){"use strict";function n(){d&&w.forEach(function(n){n.start()})}function t(){if(window.navigator.onLine){var n=o(h);c(null),w.forEach(function(n){n.stop()}),s(n)}}function e(n){if(d){var e=Date.now()-d;e>6e4*n&&t()}}function i(){var n=v.icons;return n?n[160]||n[80]||n[128]||n[48]||n[Object.keys(n)[0]]:null}function o(n){var t=n.split(".");return t[0]+"."+t[1]}function a(){_.tabs.create({url:f})}function s(n){_.tabs.create({url:g+"?version="+encodeURIComponent(n||h)})}function r(n){_.notifications.create("cj_landing_update_notification",{type:"basic",requireInteraction:!0,title:v.name+" has been updated",message:"Click to view changelog",iconUrl:i()}),_.notifications.onClicked.addListener(function(t){"cj_landing_update_notification"===t&&(s(n),_.notifications.clear("cj_landing_update_notification"))})}function c(n){d=n,_.storage.local.set({cj_landing_lastupdated:d})}function u(n){var t=n.origin||"https://apps.jeurissen.co";n.websitePath&&(t+="/"+n.websitePath),f=n.installedUrl||t+"/installed",p=n.removedUrl||t+"/uninstalled",g=n.updatedUrl||t+"/updated"}function l(t){t.skipOpenLanding&&(m=-12),u(t),_.runtime.setUninstallURL(p),_.storage.local.get(["cj_landing_lastupdated","cj_landing_versionnumber"],function(e){d=e.cj_landing_lastupdated;var i=e.cj_landing_versionnumber;if("string"!=typeof i)a();else{var s=o(i),u=o(h);u!==s&&(t.useNotification?r(u):c(Date.now()))}n(),i!==h&&_.storage.local.set({cj_landing_versionnumber:h})})}var d,f,g,p,_="undefined"!=typeof chrome&&chrome.runtime?chrome:"undefined"!=typeof browser&&browser,v=_.runtime.getManifest(),h=v.version,m=4*Math.random()-2,w=[{listener:function(n){n.cjLandingOpen&&e(0)},start:function(){_.runtime.onMessage.addListener(this.listener)},stop:function(){_.runtime.onMessage.removeListener(this.listener)}},{listener:function(n){n!==_.windows.WINDOW_ID_NONE&&e(m+24)},start:function(){_.windows.onFocusChanged.addListener(this.listener)},stop:function(){_.windows.onFocusChanged.removeListener(this.listener)}},{listener:function(){e(m+36)},start:function(){_.tabs.onCreated.addListener(this.listener)},stop:function(){_.tabs.onCreated.removeListener(this.listener)}},{listener:function(){e(m+72)},start:function(){setInterval(this.listener,3e5)},stop:function(){clearInterval(this.listener)}}];return l}();